"use strict";!function(n){function e(n,e){var t=function(n){return n.split(".").reduce(function(n,e){return n.concat(n.length?n[n.length-1]+"."+e:e)},[])},r=void 0,o=e?t(e.name):[],u=t(n.name),i=Math.min(o.length,u.length);if(e&&e.name===n.name)r=Math.max(i-1,0);else for(r=0;i>r&&o[r]===u[r];r+=1);return e&&r>0?o[r-1]:""}function t(){function n(n){var e=function(e,t){return i[e]&&(i[e]=i[e].filter(function(n){return n!==t})),n},t=function(e,t,r){var o=e.replace(/^(\*|\^|=)/,"");if(o&&!/^\$/.test(e)){var u=n.rootNode.getSegmentsByName(o);u||console.warn("No route found for "+o+", listener might never be called!")}return i[e]||(i[e]=[]),i[e]=(r?[]:i[e]).concat(t),n};n.addListener=function(n){return t("*",n)},n.removeListener=function(n){return e("*",n)},n.addNodeListener=function(n,e){return t("^"+n,e,!0)},n.removeNodeListener=function(n,t){return e("^"+n,t)},n.addRouteListener=function(n,e){return t("="+n,e)},n.removeRouteListener=function(n,t){return e("="+n,t)}}function t(n,e,t){(i[n]||[]).forEach(function(n){return n(e,t)})}function o(n,r){var o=e(n,r),u=n.name;t("^"+o,n,r),t("="+u,n,r),t("*",n,r)}function u(){i={}}var i={};return{name:r,init:n,onTransitionSuccess:o,flush:u}}var r="LISTENERS";n.listenersPlugin=t}(window);