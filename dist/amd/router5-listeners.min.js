define("router5ListenersPlugin",[],function(){"use strict";function n(n,e){var t=function(n){return n.split(".").reduce(function(n,e){return n.concat(n.length?n[n.length-1]+"."+e:e)},[])},r=void 0,o=e?t(e.name):[],u=t(n.name),i=Math.min(o.length,u.length);if(e&&e.name===n.name)r=Math.max(i-1,0);else for(r=0;i>r&&o[r]===u[r];r+=1);return e&&r>0?o[r-1]:""}function e(){function e(n){var e=function(e,t){return i[e]&&(i[e]=i[e].filter(function(n){return n!==t})),n},t=function(e,t,r){var o=e.replace(/^(\*|\^|=)/,"");if(o&&!/^\$/.test(e)){var u=n.rootNode.getSegmentsByName(o);u||console.warn("No route found for "+o+", listener might never be called!")}return i[e]||(i[e]=[]),i[e]=(r?[]:i[e]).concat(t),n};n.addListener=function(n){return t("*",n)},n.removeListener=function(n){return e("*",n)},n.addNodeListener=function(n,e){return t("^"+n,e,!0)},n.removeNodeListener=function(n,t){return e("^"+n,t)},n.addRouteListener=function(n,e){return t("="+n,e)},n.removeRouteListener=function(n,t){return e("="+n,t)}}function r(n,e,t){(i[n]||[]).forEach(function(n){return n(e,t)})}function o(e,t,o){var u=o.reload?"":n(e,t),i=e.name;r("^"+u,e,t),r("="+i,e,t),r("*",e,t)}function u(){i={}}var i={};return{name:t,init:e,onTransitionSuccess:o,flush:u}}var t="LISTENERS";return e});