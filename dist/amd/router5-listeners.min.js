"use strict";define("router5",[],function(){function n(n,e){var t=function(n){return n.split(".").reduce(function(n,e){return n.concat(n.length?n[n.length-1]+"."+e:e)},[])},r=void 0,u=e?t(e.name):[],o=t(n.name),i=Math.min(u.length,o.length);if(e&&e.name===n.name)r=Math.max(i-1,0);else for(r=0;i>r&&u[r]===o[r];r+=1);return e&&r>0?u[r-1]:""}function e(){function e(n){var e=function(e,t){return i[e]&&(i[e]=i[e].filter(function(n){return n!==t})),n},t=function(e,t,r){var u=e.replace(/^(\*|\^|=)/,"");if(u&&!/^\$/.test(e)){var o=n.rootNode.getSegmentsByName(u);o||console.warn("No route found for "+u+", listener might never be called!")}return i[e]||(i[e]=[]),i[e]=(r?[]:i[e]).concat(t),n};n.addListener=function(n){return t("*",n)},n.removeListener=function(n){return e("*",n)},n.addNodeListener=function(n,e){return t("^"+n,e,!0)},n.removeNodeListener=function(n,t){return e("^"+n,t)},n.addRouteListener=function(n,e){return t("="+n,e)},n.removeRouteListener=function(n,t){return e("="+n,t)}}function r(n,e,t){(i[n]||[]).forEach(function(n){return n(e,t)})}function u(e,t){var u=n(e,t),o=e.name;r("^"+u,e,t),r("="+o,e,t),r("*",e,t)}function o(){i={}}var i={};return{name:t,init:e,onTransitionSuccess:u,flush:o}}var t="LISTENERS";return{listenersPlugin:e}});